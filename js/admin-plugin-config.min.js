jQuery(document).ready(function(e){function a(a,n,i,d,s,l){let c,p;n=void 0===n?"epda_callback_noop":n,e.ajax({type:"POST",dataType:"json",data:a,url:ajaxurl,beforeSend:function(e){void 0!==l&&!1!==l||o("show",""),"object"==typeof l&&o("show","",l)}}).done(function(e){((p=e||"").error||void 0===p.message)&&(c=p.message?p.message:t("",epda_vars.reload_try_again,"error"))}).fail(function(e,a,o){c=o?" ["+o+"]":epda_vars.unknown_error,c=t(epda_vars.error_occurred+". "+epda_vars.msg_try_again,c,"error")}).always(function(){if(p=void 0===p?"":p,"function"==typeof s&&s(p),o("remove",""),c)return e(".epda-bottom-notice-message").remove(),e("body #epda-admin-page-wrap").append(c).removeClass("fadeOutDown"),void setTimeout(function(){e(".epda-bottom-notice-message").addClass("fadeOutDown")},1e4);"function"==typeof n?"undefined"===i?n(p):n(p,i):d&&location.reload()})}function o(a,o,t){if("show"===a){let a=void 0===t?"":"epda-admin-dialog-box-loading--relative",n='<div class="epda-admin-dialog-box-loading '+a+'"><div class="epda-admin-dbl__header"><div class="epda-admin-dbl-icon epdafa epdafa-hourglass-half"></div>'+(o?'<div class="epda-admin-text">'+o+"</div>":"")+'</div></div><div class="epda-admin-dialog-box-overlay '+a+'"></div>';void 0===t?e("body").append(n):t.append(n)}else"remove"===a&&(e(".epda-admin-dialog-box-loading").remove(),e(".epda-admin-dialog-box-overlay").remove())}function t(e,a,o){return'<div class="epda-bottom-notice-message"><div class="contents"><span class="'+o+'">'+(e?"<h4>"+e+"</h4>":"")+(a?"<p>"+a+"</p>":"")+'</span></div><div class="epda-close-notice epdafa epdafa-window-close"></div></div>'}function n(){e(".epda-admin__boxes-list__box__content .epda-wp__selected-locations-list").each(function(){let a=0,o=e(this).find("li");o.each(function(){++a<=15?e(this).removeClass("epda-wp__location--hidden"):e(this).addClass("epda-wp__location--hidden")});let t=e(this).closest(".epda-wp__selected-locations-popup").find("a");o.length<=15?t.hide():t.show()})}function i(a,o){let t=[];return a.find(".epda-wp__locations-list-select--"+o+" .epda-wp__locations-list-wrap > .epda-wp__selected-locations-list li").each(function(){t.push(e(this).data("id"))}),t}e("#epda-admin__boxes-list__settings .epda-admin__input-disabled").each(function(){e(this).find("input, select, textarea").prop("disabled",!0)}),e(document).on("click",".epda-admin__input-disabled, .epda__option-pro-tag",function(){e(this).closest(".epda-input-group").find(".epda__option-pro-tooltip").toggle()}),e(document).on("click",function(a){let o=e(a.target);o.closest(".epda__option-pro-tooltip").length||o.closest(".epda-admin__input-disabled").length||o.closest(".epda__option-pro-tag").length||e(".epda__option-pro-tooltip").hide()}),e(document.body).on("click","#epda_save_da_settings",function(o){o.preventDefault();let n=e(this).closest(".epda-admin__boxes-list--active");a({action:"epda_save_da_settings",_wpnonce_epda_ajax_action:epda_vars.nonce,arrow_css_id:n.find('[name="arrow_css_id"]').val(),arrow_ass_class:n.find('[name="arrow_css_class"]').val(),arrow_type:n.find('[name="arrow_type"]:checked').val(),animation_type:n.find('[name="animation_type"]').val(),size:n.find('[name="size"]').val(),color:n.find('[name="color"]').val(),duration_time:n.find('[name="duration_time"]').val(),bouncing_speed:n.find('[name="bouncing_speed"]:checked').val(),move_to_id:n.find('[name="move_to_id"]').val(),disappear_after_scroll:n.find('[name="disappear_after_scroll"]:checked').val(),enable_bouncing:n.find('[name="enable_bouncing"]:checked').val(),enable_duration:n.find('[name="enable_duration"]:checked').val(),location_pages_list:i(n,"page"),location_posts_list:i(n,"post"),location_cpts_list:i(n,"cpt")},function(a){a.error||void 0===a.message||function(a,o=""){e(".epda-bottom-notice-message").remove(),e("body #epda-admin-page-wrap").append(t(o,a,"success")),clearTimeout(d),d=setTimeout(function(){e(".epda-bottom-notice-message").addClass("fadeOutDown")},1e4)}(a.message)})});let d;e(document.body).on("input click",".epda-admin__boxes-list__box__content .epda-wp__locations-list-input",function(o){let t=e(this).closest(".epda-admin__boxes-list__box__content"),n=e(this),d=n.val(),s=n.data("post-type");setTimeout(function(){if(d!==n.val())return;let e={action:"epda_search_locations",_wpnonce_epda_ajax_action:epda_vars.nonce,locations_type:s,search_value:d,excluded_ids:function(e){let a=i(e,"page"),o=i(e,"post"),t=i(e,"cpt");return a.concat(o).concat(t)}(t)};!function(e){let a=e.closest(".epda-wp__locations-list-search-body");a.length&&a.find(".epda-wp__locations-list-input-wrap").addClass("epda-wp__locations-list-input-wrap--loader")}(n),a(e,function(e){!function(e){let a=e.closest(".epda-wp__locations-list-search-body");a.length&&a.find(".epda-wp__locations-list-input-wrap").removeClass("epda-wp__locations-list-input-wrap--loader")}(n),e.error||void 0===e.locations||t.find(".epda-wp__locations-list-select--"+s+" .epda-wp__found-locations-list").html(e.locations).show()},!1,!1,void 0,"no-loader")},500)}),e(document).on("click",".epda-admin__boxes-list__box__content .epda-wp__found-locations-list li",function(a){if(a.stopPropagation(),e(this).find(".epda-wp__location-assigns").length>0)return!1;e(this).appendTo(e(this).parent().parent().find(".epda-wp__selected-locations-list")),n()}),e(document).on("click",function(){e(".epda-wp__found-locations-list").html("").hide()}),e(document).on("click",".epda-admin__boxes-list__box__content .epda-wp__selected-locations-list li",function(){let a=e(this).data("id");e('.epda-admin__boxes-list__box__content .epda-wp__selected-locations-list li[data-id="'+a+'"]').remove(),n()})});